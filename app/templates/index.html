{% extends "layout.html" %}

{% block title %}Auktioner{% endblock %}

{% block content %}
<h1 class="page-title">P친g친ende & kommande auktioner</h1>

<div class="filter-container">
  <form action="{{ url_for('bid_bp.search') }}" method="GET" class="filter-form">
    <div class="filter-group">
      <label for="keyword">S칬k</label>
      <input id="keyword" type="text" name="keyword" placeholder="Vad letar du efter?">
    </div>

    <div class="filter-group">
      <label for="category">Kategori</label>
      <select id="category" name="category">
        <option value="">Alla kategorier</option>
        {% for category in categories %}
          <option value="{{ category }}">{{ category }}</option>
        {% endfor %}
      </select>
    </div>

    <div class="filter-group">
      <label for="max_price">Maxpris</label>
      <input id="max_price" type="number" name="max_price" placeholder="t.ex. 500">
    </div>

    <div class="filter-group">
      <label for="end_before">Slutar f칬re</label>
      <input id="end_before" type="datetime-local" name="end_before">
    </div>

    <button type="submit" class="search-btn">Filtrera auktioner</button>
  </form>
</div>

{% if auctions %}
  <div class="auction-list">
    {% for item in auctions %}
      <div class="auction-card">
        <h2 class="auction-title">{{ item.auction.title }}</h2>
        <p class="auction-desc">{{ item.auction.description }}</p>
        <p class="auction-meta">Slutar: {{ item.auction.end_datetime }}</p>
        <p class="auction-meta">
          Status: {{ "Avslutad" if item.auction.is_closed else "P친g친ende" }}
        </p>

        <div class="auction-footer">
          <span class="votes">游녨 {{ item.likes }} / 游녩 {{ item.dislikes }}</span>
          <a href="{{ url_for('public.auction_detail', auction_id=item.auction.id) }}" class="auction-link">
            Visa auktion
          </a>
        </div>
      </div>
    {% endfor %}
  </div>
{% else %}
  <p>Det finns inga auktioner att visa.</p>
{% endif %}
{% endblock %}

