{#- Denna mall Ã¤rver grundstrukturen (header, footer, etc.) frÃ¥n layout.html -#}
{% extends "layout.html" %}

{#- SÃ¤tter sidans titel i webblÃ¤sarens flik till auktionens titel -#}
{% block title %}{{ auction["title"] }}{% endblock %}

{% block content %}
<a href="{{ url_for('public.index') }}" class="back-link">â† Tillbaka till alla auktioner</a>
{#- Block som visar "flash"-meddelanden, typ "Ditt bud har lagts!" -#}
 

{#- Huvudrubrik och beskrivning fÃ¶r auktionen -#}
<h1 class="page-title">{{ auction["title"] }}</h1>
<p class="auction-desc">{{ auction["description"] }}</p>

{#- Rad med nyckelinformation -#}
<div class="detail-inline">
  <span class="pill"><strong>Startbud:</strong> {{ auction["starting_bid"] }} kr</span> {#- 'kr' Ã¤r hÃ¥rdkodat hÃ¤r -#}
  <span class="pill"><strong>Slutar:</strong> {{ auction["end_datetime"] }}</span>
  <span class="pill">ğŸ‘ {{ likes }} / ğŸ‘ {{ dislikes }}</span>
</div>

<div class="detail-actions">
  <form method="post" action="{{ url_for('public.like_auction', auction_id=auction.id) }}">
    <button type="submit" class="search-btn">ğŸ‘ Gilla</button>
  </form>
  <form method="post" action="{{ url_for('public.dislike_auction', auction_id=auction.id) }}">
    <button type="submit" class="search-btn">ğŸ‘ Ogilla</button>
  </form>
</div>

{#- En grid som delar upp sidan i tvÃ¥ kolumner: budhistorik och formulÃ¤r fÃ¶r att lÃ¤gga bud -#}
<div class="detail-grid">

  {#- VÃ„NSTRA kolumnen: Budhistorik -#}
  <section class="panel">
    <h2 class="section-title">Budhistorik</h2>
    {#- Om det finns nÃ¥gra bud i 'bids'-listan, visa dem -#}
    {% if bids %}
      <ol class="bid-list">
        {% for bid in bids %}
          <li class="bid-item">
            <strong>{{ bid.amount }} kr</strong>
            â€“ {{ bid.bidder_email }}
            â€“ {{ bid.created_at }}
          </li>
        {% endfor %}
      </ol>
    {#- Om 'bids'-listan Ã¤r tom, visa ett meddelande istÃ¤llet -#}
    {% else %}
      <p class="muted">Inga bud har lagts Ã¤nnu.</p>
    {% endif %}
  </section>

  {#- HÃ–GRA kolumnen: FormulÃ¤r fÃ¶r att lÃ¤gga ett nytt bud -#}
  <section class="panel">
    <h2 class="section-title">LÃ¤gg ett bud</h2>
    {#- FormulÃ¤ret skickar datan till 'place_bid'-funktionen i 'bid_bp' (bids/bid_bp.py) -#}
    <form method="post" action="{{ url_for('bid_bp.place_bid', auction_id=auction.id) }}" class="form">
      <label for="amount">Ditt bud (SEK)</label>
      <input
        type="number"
        id="amount"
        name="amount"
        {#-
           SÃ¤tter ett dynamiskt minimivÃ¤rde.
           Om det finns bud ('bids' Ã¤r inte tom), mÃ¥ste det nya budet vara minst 1 kr hÃ¶gre Ã¤n det nuvarande hÃ¶gsta budet.
           Annars mÃ¥ste budet vara minst lika hÃ¶gt som startbudet.
        -#}
        min="{{ (bids[0].amount + 1) if bids else auction.starting_bid }}"
        required
      >

      <label for="bidder_email">Din e-post</label>
      <input type="email" id="bidder_email" name="bidder_email" required>

      <button type="submit" class="search-btn">LÃ¤gg bud</button>
    </form>
  </section>

</div>
{% endblock %}
